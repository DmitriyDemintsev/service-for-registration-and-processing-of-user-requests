DROP TABLE IF EXISTS users CASCADE;
DROP TABLE IF EXISTS user_roles CASCADE;
DROP TABLE IF EXISTS applications CASCADE;

CREATE TABLE IF NOT EXISTS users (
  user_id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  name VARCHAR(32) NOT NULL,
  email VARCHAR(256) NOT NULL UNIQUE,
  password VARCHAR(250) NOT NULL
);

CREATE TABLE IF NOT EXISTS user_roles (
user_id  INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
role VARCHAR(8) NOT NULL
);

CREATE TABLE IF NOT EXISTS applications (
  app_id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  author_id BIGINT REFERENCES users(user_id) NOT NULL,
  text VARCHAR(4096) NOT NULL,
  status VARCHAR(16) NOT NULL,
  created TIMESTAMP WITHOUT TIME ZONE NOT NULL
);

INSERT INTO users VALUES(2, 'Иван', 'ivan@ivanov.ru', 'password1');
INSERT INTO users VALUES(3, 'Петр', 'petr@petrov.ru', 'password2');
INSERT INTO users VALUES(4, 'Сергей', 'sergey@sergeev.ru', 'password3');
INSERT INTO users VALUES(5, 'Анна', 'anna@akhmatova.ru', 'password1');
INSERT INTO users VALUES(6, 'Марина', 'marina@tsvetaeva.ru', 'password1');
INSERT INTO users VALUES(7, 'Вероника', 'veronika@tushnova.ru', 'password1');
INSERT INTO users VALUES(8, 'Иосиф', 'joseph@brodsky.ru', 'password1');
INSERT INTO users VALUES(9, 'Иванов', 'ivanov@ivanov.ru', 'password1');
INSERT INTO users VALUES(10, 'Иванович', 'ivanovich@ivanovich.ru', 'password1');

INSERT INTO user_roles VALUES(2, 'USER');
INSERT INTO user_roles VALUES(3, 'ADMIN');
INSERT INTO user_roles VALUES(4, 'OPERATOR');
INSERT INTO user_roles VALUES(5, 'USER');
INSERT INTO user_roles VALUES(5, 'OPERATOR');
INSERT INTO user_roles VALUES(6, 'OPERATOR');
INSERT INTO user_roles VALUES(6, 'ADMIN');
INSERT INTO user_roles VALUES(7, 'ADMIN');
INSERT INTO user_roles VALUES(7, 'USER');
INSERT INTO user_roles VALUES(8, 'ADMIN');
INSERT INTO user_roles VALUES(9, 'USER');
INSERT INTO user_roles VALUES(10, 'USER');
INSERT INTO user_roles VALUES(10, 'OPERATOR');
INSERT INTO user_roles VALUES(10, 'ADMIN');

INSERT INTO applications VALUES(2, 9, 'Первая заявка от Иванова', 'SENT', '2024-10-01 23:10:05');
INSERT INTO applications VALUES(3, 9, 'Вторая заявка от Иванова', 'SENT', '2024-10-02 23:10:05');
INSERT INTO applications VALUES(4, 9, 'Третья заявка от Иванова', 'ACCEPTED', '2024-10-03 23:10:05');
INSERT INTO applications VALUES(5, 9, 'Четвертая заявка от Иванова', 'DRAFT', '2024-10-04 23:10:05');
INSERT INTO applications VALUES(6, 9, 'Пятая заявка от Иванова', 'DRAFT', '2024-10-05 23:10:05');
INSERT INTO applications VALUES(7, 9, 'Шестая заявка от Иванова', 'REJECTED', '2024-10-06 23:10:05');
INSERT INTO applications VALUES(8, 9, 'Седьмая заявка от Иванова', 'DRAFT', '2024-10-07 23:10:05');
INSERT INTO applications VALUES(9, 9, 'Восьмая заявка от Иванова', 'ACCEPTED', '2024-10-08 23:10:05');
INSERT INTO applications VALUES(10, 9, 'Девятая заявка от Иванова', 'DRAFT', '2024-10-09 23:10:05');
INSERT INTO applications VALUES(11, 9, 'Десятая заявка от Иванова', 'REJECTED', '2024-10-10 23:10:05');
INSERT INTO applications VALUES(12, 3, 'заявка от Петра', 'SENT', '2024-10-03 23:10:05');
INSERT INTO applications VALUES(13, 4, 'заявка от Сергея', 'ACCEPTED', '2024-10-03 23:10:05');
INSERT INTO applications VALUES(14, 5, 'заявка от Анны', 'SENT', '2024-10-04 23:10:05');
INSERT INTO applications VALUES(15, 6, 'заявка от Марины', 'ACCEPTED', '2024-10-03 23:10:05');
INSERT INTO applications VALUES(16, 7, 'заявка от Вероники', 'SENT', '2024-10-05 23:10:05');
INSERT INTO applications VALUES(17, 2, 'заявка от Ивана', 'SENT', '2024-10-06 23:10:05');
INSERT INTO applications VALUES(18, 10, 'заявка от Ивановича', 'SENT', '2024-10-12 23:10:05');